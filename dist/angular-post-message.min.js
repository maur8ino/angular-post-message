/*!
* angular-post-message v1.4.0
* Copyright 2015 Kyle Welsby <kyle@mekyle.com>
* Licensed under The MIT License
*/
(function(){"use strict";var a;a=angular.module("ngPostMessage",["ng"]),a.provider("$postMessage",function(){var a={options:{showConsole:!0},$get:function(){return angular.extend({},a.options)}};return a}),a.run(["$window","$rootScope","$postMessage","postMessageService",function(a,b,c,d){b.$on("$messageOutgoing",function(c,d,e){var f;return null==e&&(e="*"),f=b.sender||a.parent,f.postMessage(d,e)}),angular.element(a).bind("message",function(a){var e;if(a=a.originalEvent||a,a&&a.data){e=null,b.sender=a.source;try{e=angular.fromJson(a.data)}catch(f){c.showConsole&&console.error("ahem",f),e=a.data}return b.$root.$broadcast("$messageIncoming",e),d.messages(e)}})}]),a.factory("postMessageService",["$rootScope",function(a){var b,c;return b=[],c={messages:function(c){return c&&(b.push(c),a.$digest()),b},lastMessage:function(){return b[b.length-1]},post:function(b,c){return c||(c="*"),a.$broadcast("$messageOutgoing",b,c)}}}])}).call(this);